/* ============================================================
   MOOD SYSTEM - Emotion-driven styling for .deck presentations
   ============================================================ */

/* === Base scene styles === */
.deck-scene {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4rem;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  transition: background 0.8s ease, color 0.8s ease;
  position: relative;
  overflow: hidden;
}

/* === MOODS === */

/* --- dramatic --- */
.mood-dramatic {
  --mood-bg: #0a0a0a;
  --mood-fg: #ffffff;
  --mood-accent: #ff6b35;
  --mood-muted: #555;
  --mood-surface: rgba(255,255,255,0.05);
  --mood-font: 'Georgia', serif;
  --mood-transition-speed: 1.2s;
  background: var(--mood-bg);
  color: var(--mood-fg);
  font-family: var(--mood-font);
}
.mood-dramatic::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, rgba(255,107,53,0.08) 0%, transparent 70%);
  pointer-events: none;
}

/* --- calm --- */
.mood-calm {
  --mood-bg: #f0f4f8;
  --mood-fg: #2d3748;
  --mood-accent: #4a9ead;
  --mood-muted: #a0aec0;
  --mood-surface: rgba(74,158,173,0.08);
  --mood-font: 'Segoe UI', system-ui, sans-serif;
  --mood-transition-speed: 1s;
  background: linear-gradient(135deg, #f0f4f8 0%, #e2e8f0 50%, #edf2f7 100%);
  color: var(--mood-fg);
  font-family: var(--mood-font);
}

/* --- energetic --- */
.mood-energetic {
  --mood-bg: #1a1a2e;
  --mood-fg: #ffffff;
  --mood-accent: #e94560;
  --mood-muted: #888;
  --mood-surface: rgba(233,69,96,0.1);
  --mood-font: 'Segoe UI', system-ui, sans-serif;
  --mood-transition-speed: 0.4s;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  color: var(--mood-fg);
  font-family: var(--mood-font);
  font-weight: 600;
}
.mood-energetic::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -20%;
  width: 60%;
  height: 200%;
  background: linear-gradient(135deg, rgba(233,69,96,0.15), transparent);
  transform: rotate(-12deg);
  pointer-events: none;
}

/* --- focused --- */
.mood-focused {
  --mood-bg: #1e1e1e;
  --mood-fg: #d4d4d4;
  --mood-accent: #569cd6;
  --mood-muted: #666;
  --mood-surface: rgba(86,156,214,0.08);
  --mood-font: 'Cascadia Code', 'Consolas', 'Fira Code', monospace;
  --mood-transition-speed: 0.6s;
  background: var(--mood-bg);
  color: var(--mood-fg);
  font-family: var(--mood-font);
}
.mood-focused::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--mood-accent), transparent);
  pointer-events: none;
}

/* --- tense --- */
.mood-tense {
  --mood-bg: #0d0d0d;
  --mood-fg: #e0e0e0;
  --mood-accent: #dc2626;
  --mood-muted: #666;
  --mood-surface: rgba(220,38,38,0.08);
  --mood-font: 'Segoe UI', system-ui, sans-serif;
  --mood-transition-speed: 0.5s;
  background: var(--mood-bg);
  color: var(--mood-fg);
  font-family: var(--mood-font);
}
.mood-tense::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at bottom, rgba(220,38,38,0.12) 0%, transparent 60%);
  pointer-events: none;
}
.mood-tense .block-heading,
.mood-tense .block-title {
  text-shadow: 0 0 40px rgba(220,38,38,0.3);
}

/* --- inspiring --- */
.mood-inspiring {
  --mood-bg: #1a1040;
  --mood-fg: #ffffff;
  --mood-accent: #f59e0b;
  --mood-muted: #a0a0c0;
  --mood-surface: rgba(245,158,11,0.1);
  --mood-font: 'Georgia', serif;
  --mood-transition-speed: 0.8s;
  background: linear-gradient(135deg, #1a1040 0%, #2d1b69 40%, #1a1040 100%);
  color: var(--mood-fg);
  font-family: var(--mood-font);
}
.mood-inspiring::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at top, rgba(245,158,11,0.12) 0%, transparent 50%);
  pointer-events: none;
}

/* --- playful --- */
.mood-playful {
  --mood-bg: #fefce8;
  --mood-fg: #374151;
  --mood-accent: #8b5cf6;
  --mood-muted: #9ca3af;
  --mood-surface: rgba(139,92,246,0.08);
  --mood-font: 'Segoe UI', system-ui, sans-serif;
  --mood-transition-speed: 0.5s;
  background: linear-gradient(135deg, #fefce8 0%, #fef3c7 30%, #ede9fe 100%);
  color: var(--mood-fg);
  font-family: var(--mood-font);
  border-radius: 0;
}
.mood-playful .block-title,
.mood-playful .block-heading {
  background: linear-gradient(135deg, #8b5cf6, #ec4899);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* === LAYOUTS === */

.layout-center {
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.layout-split {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 3rem;
  align-items: center;
}
.layout-split .block-container:first-child { grid-column: 1; }
.layout-split .beat-right,
.layout-split .block-container:last-child { grid-column: 2; }

.layout-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2rem;
  align-items: start;
}

.layout-focus {
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
}
.layout-focus .block-container {
  max-width: 90%;
}

.layout-top {
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding-top: 3rem;
}

.layout-comparison {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 2rem;
  align-items: center;
}
.layout-comparison .vs-divider {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--mood-accent);
  opacity: 0.6;
}

/* === BLOCK TYPES === */

.block-container {
  position: relative;
  z-index: 1;
}

.block-title {
  font-size: 3.5rem;
  font-weight: 700;
  line-height: 1.1;
  margin-bottom: 0.5rem;
  color: var(--mood-fg);
}

.block-subtitle {
  font-size: 1.6rem;
  font-weight: 400;
  color: var(--mood-muted);
  margin-bottom: 1rem;
}

.block-heading {
  font-size: 2.2rem;
  font-weight: 600;
  margin-bottom: 1rem;
  color: var(--mood-fg);
}

.block-text {
  font-size: 1.3rem;
  line-height: 1.6;
  color: var(--mood-fg);
  opacity: 0.9;
}

.block-list {
  font-size: 1.3rem;
  line-height: 1.8;
  list-style: none;
  padding: 0;
  text-align: left;
}
.block-list li {
  padding: 0.3rem 0;
  padding-left: 1.5rem;
  position: relative;
}
.block-list li::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--mood-accent);
}

.block-code {
  background: rgba(0,0,0,0.3);
  border-radius: 12px;
  padding: 1.5rem 2rem;
  font-family: 'Cascadia Code', 'Consolas', monospace;
  font-size: 1.1rem;
  line-height: 1.6;
  text-align: left;
  overflow-x: auto;
  border: 1px solid rgba(255,255,255,0.08);
  width: 100%;
  max-width: 800px;
}

.block-metric {
  text-align: center;
}
.block-metric .metric-value {
  font-size: 5rem;
  font-weight: 800;
  color: var(--mood-accent);
  line-height: 1;
}
.block-metric .metric-label {
  font-size: 1.2rem;
  color: var(--mood-muted);
  margin-top: 0.5rem;
}

.block-quote {
  border-left: 4px solid var(--mood-accent);
  padding: 1rem 2rem;
  font-style: italic;
  font-size: 1.5rem;
  line-height: 1.5;
  max-width: 700px;
}
.block-quote .quote-attribution {
  font-style: normal;
  font-size: 1rem;
  color: var(--mood-muted);
  margin-top: 0.8rem;
}

.block-image img {
  max-width: 100%;
  max-height: 60vh;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.3);
}

.block-comparison {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 2rem;
  align-items: start;
  text-align: center;
  width: 100%;
}
.block-comparison .comp-side {
  padding: 1.5rem;
  background: var(--mood-surface);
  border-radius: 12px;
}
.block-comparison .comp-vs {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--mood-accent);
  align-self: center;
}

.block-embed iframe,
.block-embed video {
  max-width: 100%;
  max-height: 60vh;
  border-radius: 12px;
  border: none;
}

/* === ENTER ANIMATIONS === */

@keyframes deck-fade { from { opacity: 0; } to { opacity: 1; } }
@keyframes deck-rise { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
@keyframes deck-slide-left { from { opacity: 0; transform: translateX(60px); } to { opacity: 1; transform: translateX(0); } }
@keyframes deck-slide-right { from { opacity: 0; transform: translateX(-60px); } to { opacity: 1; transform: translateX(0); } }
@keyframes deck-zoom { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
@keyframes deck-blur { from { opacity: 0; filter: blur(10px); } to { opacity: 1; filter: blur(0); } }
@keyframes deck-bounce {
  0% { opacity: 0; transform: translateY(40px); }
  60% { transform: translateY(-8px); }
  80% { transform: translateY(4px); }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes deck-typewriter {
  from { width: 0; } to { width: 100%; }
}

.enter-fade.visible { animation: deck-fade var(--mood-transition-speed, 0.6s) ease-out both; }
.enter-rise.visible { animation: deck-rise var(--mood-transition-speed, 0.6s) ease-out both; }
.enter-slide-left.visible { animation: deck-slide-left var(--mood-transition-speed, 0.6s) ease-out both; }
.enter-slide-right.visible { animation: deck-slide-right var(--mood-transition-speed, 0.6s) ease-out both; }
.enter-zoom.visible { animation: deck-zoom var(--mood-transition-speed, 0.6s) ease-out both; }
.enter-blur.visible { animation: deck-blur var(--mood-transition-speed, 0.6s) ease-out both; }
.enter-bounce.visible { animation: deck-bounce 0.8s ease-out both; }

.enter-fade:not(.visible),
.enter-rise:not(.visible),
.enter-slide-left:not(.visible),
.enter-slide-right:not(.visible),
.enter-zoom:not(.visible),
.enter-blur:not(.visible),
.enter-bounce:not(.visible) {
  opacity: 0;
}

/* Typewriter uses overflow trick */
.enter-typewriter .code-line {
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid var(--mood-accent);
}
.enter-typewriter.visible .code-line {
  animation: deck-typewriter 1.5s steps(40) both;
}
